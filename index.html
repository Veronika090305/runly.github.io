<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUNLI - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏–∏ –≤ –∑–¥–æ—Ä–æ–≤—å–µ, —Ñ–∏–Ω–∞–Ω—Å–∞—Ö –∏ –±—ã—Ç—É</title>
    <meta name="description" content="RUNLI (–†—É–Ω–ª–∏) - –µ–¥–∏–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤–º–µ—Å—Ç–æ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è, —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –±—ã—Ç–∞. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏.">
    <meta name="keywords" content="—Ä—É–Ω–ª–∏, runli, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –∑–¥–æ—Ä–æ–≤—å–µ, —Ñ–∏–Ω–∞–Ω—Å—ã, –±—ã—Ç, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –≥–∞—Ä–º–æ–Ω–∏—è, —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–µ–≤—É—à–µ–∫">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://lyqedngejapolcffscyk.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx5cWVkbmdlamFwb2xjZmZzY3lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NzYxOTAsImV4cCI6MjA3ODU1MjE5MH0.xdRoqew8xSAmDbDtryMQBmu7vj9FBj_AQDD5cCJl-_g';
        window.supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>
</head>
<body>
    <header>
        <h1>RUNLI</h1>
        <nav>
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a> |
            <a href="about.html">–ù–∞—à–∞ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è</a> |
            <a href="telegram.html">–ú—ã –≤ Telegram</a>
        </nav>
    </header>

    <main>
        <!-- –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è - –û–ë–ù–û–í–õ–ï–ù–ê -->
        <section class="hero-section">
            <div class="hero-content">
                <h2>–õ–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –∑–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π</h2>
                <p class="lead">–ú—ã —Å–æ–∑–¥–∞–ª–∏ RUNLI –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É—Å—Ç–∞–ª –æ—Ç —Ö–∞–æ—Å–∞ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫, –∑–∞–±—ã—Ç—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –∫—Ä–∞—Å–∏–≤—ã—Ö, –Ω–æ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø–ª–∞–Ω–µ—Ä–æ–≤. –ó–¥–µ—Å—å –≤—Å—ë —Å–æ–±—Ä–∞–Ω–æ –≤ –µ–¥–∏–Ω—É—é –∏ –ø–æ–Ω—è—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π, –∞ –ø—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞, –≥–¥–µ –∫–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å —Å–ª—É–∂–∏—Ç –æ–¥–Ω–æ–π —Ü–µ–ª–∏ - –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –≤–∞—à–µ –≤—Ä–µ–º—è, —ç–Ω–µ—Ä–≥–∏—é –∏ –º—ã—Å–ª–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Å–∞–º–æ–º –≥–ª–∞–≤–Ω–æ–º: –Ω–∞ —Å–µ–±–µ. –í–∞—à–∞ –≥–∞—Ä–º–æ–Ω–∏—è - –Ω–∞—à –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç!</p>
            </div>

            <!-- –ë–ª–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
            <div class="auth-section">
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">–í—Ö–æ–¥</button>
                    <button class="auth-tab" data-tab="signup">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>

                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <div id="login-form" class="auth-form active">
                    <form id="signin-form">
                        <input type="email" id="signin-email" placeholder="Email" required>
                        <input type="password" id="signin-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <div class="auth-links">
                            <button type="button" id="forgot-password" class="link">–ù–µ –ø–æ–º–Ω—é –ø–∞—Ä–æ–ª—å</button>
                        </div>
                        <button type="submit" class="auth-button">–í–æ–π—Ç–∏</button>
                    </form>
                    <div id="signin-msg" class="notice" style="display:none"></div>
                </div>

                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div id="signup-form" class="auth-form">
                    <form id="register-form">
                        <input type="email" id="register-email" placeholder="Email" required>
                        <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>–í–æ–∑—Ä–∞—Å—Ç</label>
                                <input type="number" id="register-age" placeholder="–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?" min="14" max="100" 
                                       style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid var(--dust-grey);">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–í–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ):</label>
                            <div class="checkbox-grid">
                                <div class="checkbox-card">
                                    <input type="checkbox" id="activity-school" name="activity" value="school">
                                    <label for="activity-school" class="checkbox-label">
                                        <span class="checkbox-icon">üè´</span>
                                        <span class="checkbox-text">–®–∫–æ–ª–∞</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="activity-student" name="activity" value="student">
                                    <label for="activity-student" class="checkbox-label">
                                        <span class="checkbox-icon">üéì</span>
                                        <span class="checkbox-text">–í—É–∑ –∏–ª–∏ –°–ü–û</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="activity-employed" name="activity" value="employed">
                                    <label for="activity-employed" class="checkbox-label">
                                        <span class="checkbox-icon">üíº</span>
                                        <span class="checkbox-text">–†–∞–±–æ—Ç–∞</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="activity-unemployed" name="activity" value="unemployed">
                                    <label for="activity-unemployed" class="checkbox-label">
                                        <span class="checkbox-icon">üå±</span>
                                        <span class="checkbox-text">–î–æ–º –∏ —Å–µ–º—å—è</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="activity-entrepreneur" name="activity" value="entrepreneur">
                                    <label for="activity-entrepreneur" class="checkbox-label">
                                        <span class="checkbox-icon">üöÄ</span>
                                        <span class="checkbox-text">–ë–∏–∑–Ω–µ—Å</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="activity-other" name="activity" value="other">
                                    <label for="activity-other" class="checkbox-label">
                                        <span class="checkbox-icon">‚ú®</span>
                                        <span class="checkbox-text">–î—Ä—É–≥–æ–µ</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–¶–µ–ª–∏ –Ω–∞ RUNLI (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)</label>
                            <div class="checkbox-grid">
                                <div class="checkbox-card">
                                    <input type="checkbox" id="goal-finance" name="goals" value="finance">
                                    <label for="goal-finance" class="checkbox-label">
                                        <span class="checkbox-icon">üí∞</span>
                                        <span class="checkbox-text">–§–∏–Ω–∞–Ω—Å—ã</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="goal-career" name="goals" value="career">
                                    <label for="goal-career" class="checkbox-label">
                                        <span class="checkbox-icon">üéØ</span>
                                        <span class="checkbox-text">–ö–∞—Ä—å–µ—Ä–∞</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="goal-study" name="goals" value="study">
                                    <label for="goal-study" class="checkbox-label">
                                        <span class="checkbox-icon">üìö</span>
                                        <span class="checkbox-text">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="goal-health" name="goals" value="health">
                                    <label for="goal-health" class="checkbox-label">
                                        <span class="checkbox-icon">üåø</span>
                                        <span class="checkbox-text">–ó–¥–æ—Ä–æ–≤—å–µ</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="goal-organization" name="goals" value="organization">
                                    <label for="goal-organization" class="checkbox-label">
                                        <span class="checkbox-icon">üè†</span>
                                        <span class="checkbox-text">–ë—ã—Ç</span>
                                    </label>
                                </div>
                                <div class="checkbox-card">
                                    <input type="checkbox" id="goal-relationships" name="goals" value="relationships">
                                    <label for="goal-relationships" class="checkbox-label">
                                        <span class="checkbox-icon">üíù</span>
                                        <span class="checkbox-text">–û—Ç–Ω–æ—à–µ–Ω–∏—è</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="terms">
                            –ù–∞–∂–∏–º–∞—è ¬´–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è¬ª, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å <a href="/terms.html" class="link">–ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–µ—Ä–≤–∏—Å–∞</a>.
                        </div>
                        <button type="submit" class="auth-button">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        
                        <!-- –ë–ª–æ–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞ -->
                        <div id="resend-email" style="display: none; margin-top: 15px; text-align: center;">
                            <p class="small muted">–ù–µ –ø—Ä–∏—à–ª–æ –ø–∏—Å—å–º–æ?</p>
                            <button type="button" id="resend-btn" class="link" style="font-size: 14px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â—ë —Ä–∞–∑</button>
                        </div>
                        
                    </form>
                    <div id="signup-msg" class="notice" style="display:none"></div>
                </div>
            </div>
        </section>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ -->
        <section class="features-section">
    <h2 class="nav-font">–°—Ñ–µ—Ä—ã –∂–∏–∑–Ω–∏ –≤ RUNLI:</h2>
    <div class="features-grid">
        <div class="feature-card">
            <h3>–∑–¥–æ—Ä–æ–≤—å–µ</h3>
        </div>
        <div class="feature-card">
            <h3>—Ñ–∏–Ω–∞–Ω—Å—ã</h3>
        </div>
        <div class="feature-card">
            <h3>—Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</h3>
        </div>
        <div class="feature-card">
            <h3>—É—é—Ç</h3>
        </div>
    </div>
</section>
    </main>

    <footer>
        <p>&copy; 2025 RUNLI. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

    <script>
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –∏ —Ñ–æ—Ä–º
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–µ –∏ —Ñ–æ—Ä–º–µ
                tab.classList.add('active');
                const tabName = tab.getAttribute('data-tab');
                document.getElementById(`${tabName}-form`).classList.add('active');
            });
        });

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
        document.getElementById('forgot-password').addEventListener('click', async () => {
            const email = document.getElementById('signin-email').value.trim();
            if (!email) {
                alert('–í–≤–µ–¥–∏—Ç–µ email –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è');
                return;
            }

            try {
                const { error } = await supabase.auth.resetPasswordForEmail(email, {
                    redirectTo: `${window.location.origin}/reset-password.html`
                });
                
                if (error) throw error;
                alert('–°—Å—ã–ª–∫–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–æ—á—Ç—É üíå');
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        });

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        document.getElementById('register-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const age = document.getElementById('register-age').value;
            
            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            const activities = Array.from(document.querySelectorAll('input[name="activity"]:checked'))
                                  .map(checkbox => checkbox.value);
            
            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏
            const goals = Array.from(document.querySelectorAll('input[name="goals"]:checked'))
                              .map(checkbox => checkbox.value);

            if (password.length < 6) {
                setMessage('signup-msg', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –º–∏–Ω–∏–º—É–º –∏–∑ 6 —Å–∏–º–≤–æ–ª–æ–≤ üîê');
                return;
            }

            try {
                const redirectTo = `${window.location.origin}/index.html?confirmed=1`;
                const { data, error } = await supabase.auth.signUp({
                    email,
                    password
                }, { redirectTo });

                if (error) throw error;

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø—Ä–æ—Ñ–∏–ª—å
                if (data.user) {
                    await supabase.from('profiles').upsert({
                        user_id: data.user.id,
                        age: age || null,
                        activity: activities.length > 0 ? activities : null,
                        goals: goals.length > 0 ? goals : null,
                        updated_at: new Date().toISOString()
                    });
                }

                setMessage('signup-msg', 
                    `–ö–≤–µ—Å—Ç –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—á—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω! –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–±—Ä–∞—Ç—å –∫–ª—é—á-—Å—Å—ã–ª–∫—É –∏–∑ –≤–∞—à–µ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å—É–Ω–¥—É–∫–∞!                   

–ë–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã –≤—ã —É–∂–µ –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç, 
–Ω–æ –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ –ø–∏—Å—å–º–∞ –Ω–∞ –ø–æ—á—Ç–µ –≤ –±—É–¥—É—â–µ–º
–Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å, –µ—Å–ª–∏ –∑–∞–±—É–¥–µ—Ç–µ –µ–≥–æ`, 
                    true
                );
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
                document.getElementById('resend-email').style.display = 'block';
                
            } catch (error) {
                setMessage('signup-msg', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        });

        // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        document.getElementById('resend-btn').addEventListener('click', async () => {
            const email = document.getElementById('register-email').value.trim();
            if (!email) {
                setMessage('signup-msg', '–í–≤–µ–¥–∏—Ç–µ email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞');
                return;
            }

            try {
                const { error } = await supabase.auth.resend({
                    type: 'signup',
                    email: email
                });
                
                if (error) throw error;
                setMessage('signup-msg', '–ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É (–∏ –ø–∞–ø–∫—É "–°–ø–∞–º")', true);
            } catch (error) {
                setMessage('signup-msg', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        });

        // –í—Ö–æ–¥
        document.getElementById('signin-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('signin-email').value.trim();
            const password = document.getElementById('signin-password').value;

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password
                });

                if (error) throw error;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ª–∏ –ø–æ—á—Ç–∞
                const { data: { user } } = await supabase.auth.getUser();
                let message = '–û—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∞—à —É—é—Ç–Ω—ã–π —É–≥–æ–ª–æ–∫...';
                
                if (user && !user.email_confirmed_at) {
                    message += '\n\nüí° –ü–æ—á—Ç–∞ –µ—â—ë –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–∫–∫–∞—É–Ω—Ç–æ–º, –Ω–æ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å';
                }

                setMessage('signin-msg', message, true);
                
                setTimeout(() => {
                    window.location.href = '/dashboard.html';
                }, 1000);
            } catch (error) {
                setMessage('signin-msg', '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
            }
        });

        function setMessage(elementId, text, isSuccess = false) {
            const element = document.getElementById(elementId);
            element.textContent = text;
            element.style.display = 'block';
            element.className = `notice ${isSuccess ? 'success' : ''}`;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('confirmed') === '1') {
            setMessage('signin-msg', '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ! –í–∞—à–µ –ª–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç–æ', true);
        }
    </script>
</body>
</html>
